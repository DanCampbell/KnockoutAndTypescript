
@{
    ViewBag.Title = "Points";
   
}


<link href="~/Content/bootstrap.css" rel="stylesheet" />

<script src="~/Scripts/knockout-3.4.2.js"></script>
<script src="~/Scripts/knockout.mapping-latest.js"></script>
<script src="~/Scripts/Contribute.js"></script>
<script src="~/Scripts/knockout.validation.js"></script>

<style>
    .tab-pane {
        height: 600px;
        overflow-y: scroll;
    }
</style>

<style>
    .badge {
        padding: 1px 9px 2px;
        font-size: 12.025px;
        font-weight: bold;
        white-space: nowrap;
        color: #ffffff;
        background-color: #999999;
        -webkit-border-radius: 9px;
        -moz-border-radius: 9px;
        border-radius: 9px;
    }

        .badge:hover {
            color: #ffffff;
            text-decoration: none;
            cursor: pointer;
        }

    .badge-error {
        background-color: #b94a48;
    }

        .badge-error:hover {
            background-color: #953b39;
        }

    .badge-warning {
        background-color: #f89406;
    }

        .badge-warning:hover {
            background-color: #c67605;
        }

    .badge-success {
        background-color: #468847;
    }

        .badge-success:hover {
            background-color: #356635;
        }

    .badge-info {
        background-color: #3a87ad;
    }

        .badge-info:hover {
            background-color: #2d6987;
        }

    .badge-inverse {
        background-color: #333333;
    }

        .badge-inverse:hover {
            background-color: #1a1a1a;
        }
</style>
@section scripts {
<script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>

<!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>
    <script>
        $(function () {
            @*var jsModel2 = @Html.Raw(Json.Encode(Model));*@
            var chat = $.connection.kidHub;
            var UserSelected = @(ViewBag.UserSelected);   
            var Parent = '@(ViewBag.Parent)';
            var Contributor ='@(ViewBag.Contributor)'
            var viewModel = new ContributeViewModel(UserSelected,Parent, Contributor);

           // debugger;
           
        //    console.log(jsModel2);
            @*var viewmodel = { children: ko.mapping.fromJS(@Html.Raw(Json.Encode(Model))) };*@

            ko.validation.init({
                registerExtenders: true,

                messagesOnModified: true,

                insertMessages: true

            });
            viewModel.ChatVar = chat;
            ko.applyBindings(viewModel);
            $.connection.hub.start();

        });
    </script>
}
<div class="container-fluid">  
    <div class="row">
        <div class="text-center h2">
            <select  data-bind="options: children,
                       optionsText: 'ChildName',
                       value: SelectedChild,
                       optionsCaption: 'Choose...', event:{ change: SelectChange}"></select>
        </div>
        <div class="h2 text-center"><span>Total Points: &nbsp;</span><span data-bind="text:TotalPointsNum"></span></div>
        </div>
    
        <div class="row">
            <div class="col-md-3">
                <div class="panel panel-default tab-pane">
                    <!-- Default panel contents -->
                    <div class="panel-heading">Select Good</div>
                    @*<div class="panel-body"></div>*@
                        <ul class="list-group" data-bind="foreach:goodBehaviour" style="cursor: pointer;">
                            <li class="list-group-item"><span data-bind="text:BehaviourName, click:$parent.listItemSelected "></span><span class="badge" data-bind="text:BehaviourPoints"></span></li>
                        </ul>
                    </div>
               
                </div>
                <div class="col-md-6">
                    @*<div style="float:left;width:20%" >*@
                    <div class="row">
                        <div style="float:left">
                            <h3 class="text-center">
                                <span class="label label-primary">Good Behaviour</span>
                            </h3>
                            <img src="~/Content/goodboy.jpg" class="img-responsive img-rounded" alt="Cinque Terre" style="width:204px;height:240px;">
                            <h2 data-bind="text:GoodPointsNum" class="text-center"></h2>
                        </div>
                        <div data-bind="if:ChildSelectedBool" style="float:left">                           
                                <p>&nbsp;</p>                                
                                    <img class="img-rounded" width="140" height="140" data-bind="attr:{src: SelectedChild().UserImage}" style="margin:0px 5px"/>
                        </div>
                        <div style="float:left">
                            @*<div style="float:left;width:20%">*@
                            <h3 class="text-center">
                                <span class="label label-primary">Naughty Behaviour</span>
                            </h3>
                            <img src="~/Content/naughty-boy.jpg" class="img-responsive img-rounded" alt="Cinque Terre" style="width:204px;height:240px;">
                            <h2 data-bind="text:BadPointsNum" class="text-center ">                                
                            </h2>
                        </div>
                    </div>
                    <div class="row">
                        <div style="float:left">
                            <h4 class="text-center">
                                <span class="label label-primary">Review:</span>
                            </h4>
                            <div data-bind="if:NothingSelectedBool">
                                <img src="~/Content/review.jpg" class="img-responsive img-rounded" alt="Cinque Terre" style="width:140px;height:150px;">
                                @*<h2 data-bind="text:BankedPointsNum" class="text-center"></h2>*@
                            </div>
                            <div data-bind="if:ChildSelectedBool">
                                <a data-bind="attr: { 'href': '@Url.Action("ReviewPoints", "Home")' + '/' + SelectedChild().ChildId }">
                                    <img src="~/Content/review.jpg" class="img-responsive img-rounded" alt="Cinque Terre" style="width:140px;height:150px;">
                                </a>
                            </div>
                        </div>
                        <div style="float:left">
                            <h4 class="text-center">
                                <span class="label label-primary">Banked Points:</span>
                            </h4>
                            <img src="~/Content/piggy-bank.png" class="img-responsive img-rounded" data-bind="click:BankPointsClick" alt="Cinque Terre" style="width:140px;height:150px;">
                            <h2 data-bind="text:BankedPointsNum" class="text-center"></h2>
                        </div>
                        <div style="float:left">
                            <h4 class="text-center">
                                <span class="label label-primary">Allocate Points:</span>
                            </h4>
                                <div data-bind="if:NothingSelectedBool">
                                    <img src="~/Content/abacus.jpg" class="img-responsive img-rounded" alt="Cinque Terre" style="width:140px;height:150px;">
                                    @*<h2 data-bind="text:BankedPointsNum" class="text-center"></h2>*@
                                </div>
                                <div data-bind="if:ChildSelectedBool">
                                    <a data-bind="attr: { 'href': '@Url.Action("RewardAcceptance", "Home")' + '/' + SelectedChild().ChildId }">
                                        <img src="~/Content/abacus.jpg" class="img-responsive img-rounded" alt="Cinque Terre" style="width:140px;height:150px;">
                                    </a>
                                </div>
</div>
                        <div style="float:left">
                            @*<div style="float:left;width:20%">*@
                            <h4 class="text-center">
                                <span class="label label-primary">Rewards:</span>
                                </h4>
                                <div data-bind="if:ChildSelectedBool">
                                    <a data-bind="attr: { 'href': '@Url.Action("RewardHistory", "Home")' + '/' + SelectedChild().ChildId }">
                                        <img src="~/Content/reward.jpg" class="img-responsive img-rounded" alt="Cinque Terre" style="width:140px;height:150px;">
                                    </a>
                                </div>
                                <div data-bind="if:NothingSelectedBool">
                                    <img src="~/Content/reward.jpg" class="img-responsive img-rounded" alt="Cinque Terre" style="width:140px;height:150px;">
                                </div>
                                @*<h2 data-bind="text:BadPointsNum" class="text-center"></h2>*@
</div>
                        
                        </div>
                </div>

                <div class="col-md-3" style="float:left">
                    <div class="panel panel-default tab-pane">
                        <!-- Default panel contents -->
                        <div class="panel-heading">Select Naughty</div>
                        <ul class="list-group" data-bind="foreach:naughtyBehaviour" style="cursor: pointer;">
                            <li class="list-group-item"><span data-bind="text:BehaviourName, click:$parent.listItemSelected"></span><span class="badge" data-bind="text:BehaviourPoints"></span></li>
                        </ul>
                    </div>
                    </div>
            </div>
   
    </div>

